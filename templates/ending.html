<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoryForge - Your Epic Tale</title>
    
    <!-- Link to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Special+Elite&family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
    
    <!-- Link to Tailwind's output.css -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/output.css') }}?v=1">
    <!-- Your custom styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=1">
</head>
<body class="bg-gradient-to-br from-[#1a1a2e] to-[#2a1b3d] text-gray-100 font-body">
    <div class="ending-wrapper max-w-3xl mx-auto p-4 min-h-screen">
        <!-- Header with Title and Subtitle -->
        <div class="ending-header text-center mb-8">
            <!-- Title with UnifrakturCook font -->
            <h1 class="title">Your Epic Tale</h1>
            <!-- Subtitle with Cinzel font -->
            <p class="subtitle">A masterpiece crafted by StoryForge</p>
        </div>

        <!-- Book Container (Two pages per spread) -->
        <div class="book-container">
            <!-- Left Page -->
            <div class="page" id="left-page">
                <div class="page-content font-body" role="article"></div>
            </div>
            <!-- Right Page -->
            <div class="page" id="right-page">
                <div class="page-content font-body" role="article"></div>
            </div>
        </div>
        <!-- Hidden element to pass story to JS -->
        <div id="ending-story-data" class="hidden" aria-hidden="true">{{ story|tojson|safe }}</div>
        <!-- Debug Info -->
        <script>
            console.log('Story data initialized');
            const debugStory = {{ story|tojson|safe }};
            console.log('Raw story text:', debugStory);
            document.addEventListener('DOMContentLoaded', () => {
                const storyElem = document.getElementById('ending-story-data');
                if (storyElem) {
                    console.log('Story element found');
                    try {
                        const content = JSON.parse(storyElem.textContent);
                        console.log('Parsed story content:', content);
                    } catch (e) {
                        console.error('Error parsing story:', e);
                    }
                } else {
                    console.error('Story element not found');
                }
            });
        </script>

        <!-- Navigation Arrows -->
        <div class="navigation text-center mt-8">
            <button class="prev bg-[#6a4c93] text-white px-6 py-2 rounded-md font-medium text-lg hover:bg-[#8b6bb7] transition ease-in-out transform hover:scale-105">← Previous</button>
            <button class="next bg-[#6a4c93] text-white px-6 py-2 rounded-md font-medium text-lg hover:bg-[#8b6bb7] transition ease-in-out transform hover:scale-105">Next →</button>
        </div>

        <div class="text-center mt-8">
            <a class="restart-link bg-[#8b6bb7] text-white px-8 py-3 rounded-full text-lg font-semibold hover:bg-[#6a4c93] transition ease-in-out transform hover:scale-105" href="/">Begin a New Adventure</a>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/ending.js') }}"></script>
</body>
</html>


